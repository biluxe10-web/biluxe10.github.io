<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Biluxe10 | Dashboard</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDxxkC9iD1V1w-53Kf4oBrHEXlBLvCc7sE",
      authDomain: "biluxe10-3e894.firebaseapp.com",
      projectId: "biluxe10-3e894",
      storageBucket: "biluxe10-3e894.firebasestorage.app",
      messagingSenderId: "804749588233",
      appId: "1:804749588233:web:7777648c0c7834733c05d8"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, async (user) => {
      if(!user){
        alert("Please login first!");
        window.location.href = "auth.html";
        return;
      }

      const docRef = doc(db, "users", user.uid);
      const docSnap = await getDoc(docRef);

      if(!docSnap.exists()){
        alert("User data not found!");
        return;
      }

      const data = docSnap.data();

      if(data.paymentStatus !== "submitted" || data.adminVerified !== true){
        alert("Payment not verified by admin!");
        window.location.href = "auth.html";
        return;
      }

      // Fill dashboard content
      const dashboard = document.getElementById("dashboardContent");
      dashboard.innerHTML = `
        <div class="cards">
          <div class="card"><h3>Name</h3><p>${data.name}</p></div>
          <div class="card"><h3>Email</h3><p>${data.email}</p></div>
          <div class="card"><h3>Selected Pack</h3><p>${data.selectedPack || 'Not selected'}</p></div>
          <div class="card"><h3>Payment Status</h3><p>${data.paymentStatus}</p></div>
          <div class="card"><h3>Admin Verified</h3><p>${data.adminVerified}</p></div>
          <div class="card"><h3>Earnings</h3><p>${data.earnings || 0}</p></div>
        </div>
      `;
    });
  </script>

  <style>
    body {
      margin:0; padding:0;
      font-family:'Poppins', sans-serif;
      background: linear-gradient(135deg,#f093fb,#f5576c,#4facfe);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:30px 10px;
    }

    h1 { color:white; text-align:center; margin-bottom:30px; }
    .cards { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; }
    .card {
      background: rgba(255,255,255,0.95);
      padding:20px;
      border-radius:15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      width:200px;
      text-align:center;
      transition:0.3s;
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.3);}
    .card h3 { margin-bottom:10px; color:#ff5e57; }
    .card p { font-size:18px; font-weight:bold; color:#333; }
  </style>
</head>
<body>
  <h1>Welcome to Your Dashboard</h1>
  <div id="dashboardContent"></div>
</body>
</html>
