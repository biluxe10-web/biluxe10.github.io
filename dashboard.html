<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Biluxe10 | Dashboard</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }

    body { background: #f4f6fa; color: #222; display: flex; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background: linear-gradient(180deg, #003366, #001f3f);
      color: #fff;
      padding-top: 20px;
      position: fixed;
      top: 0; bottom: 0; left: 0;
      transition: 0.3s;
      overflow-y: auto;
    }
    .sidebar h2 { text-align: center; margin-bottom: 30px; font-size: 20px; color: #ffcc00; }
    .sidebar a { display: block; padding: 12px 20px; color: #fff; text-decoration: none; }
    .sidebar a:hover { background: rgba(255, 255, 255, 0.1); }

    .menu-toggle {
      position: absolute; top: 15px; right: -45px;
      background: #003366; color: #fff;
      border: none; padding: 10px 12px; border-radius: 5px;
      cursor: pointer; display: none;
    }

    .main { margin-left: 250px; padding: 20px; width: 100%; transition: 0.3s; }
    .header { display: flex; justify-content: space-between; align-items: center; }
    .header h1 { font-size: 24px; color: #003366; }

    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
    .card {
      background: linear-gradient(145deg, #002b5b, #004080);
      color: #fff; padding: 25px; border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .card h3 { font-size: 16px; margin-bottom: 8px; color: #ffcc00; }
    .card p { font-size: 22px; font-weight: 600; }

    @media (max-width: 768px) {
      .sidebar { left: -250px; }
      .sidebar.active { left: 0; }
      .menu-toggle { display: block; }
      .main { margin-left: 0; }
    }
  </style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <button class="menu-toggle" id="toggleBtn">‚ò∞</button>
    <h2>BILUXE10</h2>
    <a href="#">üè† Dashboard</a>
    <a href="#">üß© Daily Task</a>
    <a href="#">üë§ Update Profile</a>
    <a href="#">üë• My Team</a>
    <a href="#">üí∞ Income</a>
    <a href="#">üîë T-Code Redeem</a>
    <a href="#">üí≥ Withdrawal</a>
    <a href="#">üìú All Transactions</a>
    <a href="#">‚ÑπÔ∏è About Us</a>
    <a href="#">üìû Contact Us</a>
    <a href="#">üí¨ Chat Support</a>
    <a href="#">üö™ Logout</a>
  </div>

  <div class="main">
    <div class="header">
      <h1>Dashboard Overview</h1>
    </div>

    <div class="cards">
      <div class="card">
        <h3>Total Earnings</h3>
        <p id="totalIncome">‚Çπ0</p>
      </div>
      <div class="card">
        <h3>Direct Income</h3>
        <p id="activeIncome">‚Çπ0</p>
      </div>
      <div class="card">
        <h3>Passive Income</h3>
        <p id="passiveIncome">‚Çπ0</p>
      </div>
      <div class="card">
        <h3>Task Points</h3>
        <p id="points">0 pts</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://cisbvzecomyueslqkmbd.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpc2J2emVjb215dWVzbHFrbWJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MDMwNTIsImV4cCI6MjA3NTQ3OTA1Mn0.hUNwgoIt-hgh21a1WNqsGkC2QC6mpwAcio5ek86kAfc";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleBtn');
    toggleBtn.onclick = () => sidebar.classList.toggle('active');

    async function loadEarnings() {
      const userEmail = localStorage.getItem("email"); // assume user email stored on login
      if (!userEmail) return;

      const { data, error } = await supabase
        .from("members")
        .select("total_income, active_income, passive_income, points")
        .eq("email", userEmail)
        .single();

      if (error || !data) {
        document.getElementById("totalIncome").innerText = "‚Çπ0";
        document.getElementById("activeIncome").innerText = "‚Çπ0";
        document.getElementById("passiveIncome").innerText = "‚Çπ0";
        document.getElementById("points").innerText = "0 pts";
        return;
      }

      document.getElementById("totalIncome").innerText = "‚Çπ" + data.total_income;
      document.getElementById("activeIncome").innerText = "‚Çπ" + data.active_income;
      document.getElementById("passiveIncome").innerText = "‚Çπ" + data.passive_income;
      document.getElementById("points").innerText = data.points + " pts";
    }

    loadEarnings();
  </script>
</body>
</html>
