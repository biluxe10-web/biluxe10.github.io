<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Biluxe10 | Dashboard</title>
  <script src="firebase-init.js"></script>
</head>
<body>
  <h1>Welcome to Your Dashboard</h1>
  <div id="dashboardContent"></div>

  <script>
    auth.onAuthStateChanged(async (user) => {
      if (!user) {
        window.location.href = "auth.html";
        return;
      }

      const docRef = firebase.doc(db, "users", user.uid);
      const docSnap = await firebase.getDoc(docRef);

      if (!docSnap.exists()) {
        alert("User data not found.");
        return;
      }

      const data = docSnap.data();

      if (data.paymentStatus !== "submitted" || data.adminVerified !== true) {
        alert("Payment not verified by admin yet!");
        window.location.href = "auth.html";
        return;
      }

      document.getElementById("dashboardContent").innerHTML = `
        <p>Name: ${data.name}</p>
        <p>Email: ${data.email}</p>
        <p>Selected Pack: ${data.selectedPack || "Not selected"}</p>
        <p>Payment Status: ${data.paymentStatus}</p>
        <p>Admin Verified: ${data.adminVerified}</p>
      `;
    });
  </script>
</body>
</html>
