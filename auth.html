<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BILUXE10 | PREMIUM AFFILIATE</title>
    
    <!-- PREMIUM FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Clash+Display:wght@400;500;600;700&family=Satoshi:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <style>
        /* ===== ULTRA PREMIUM A4 DESIGN SYSTEM ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Premium Color Palette - Luxury Edition */
            --reg: #6B7280;        /* Registration - Slate */
            --bronze: #CD7F32;     /* Bronze */
            --silver: #C0C0C0;     /* Silver */
            --gold: #FFD700;       /* Gold */
            --platinum: #E5E4E2;   /* Platinum */
            --emerald: #50C878;    /* Emerald */
            --ruby: #E0115F;       /* Ruby */
            --sapphire: #0F52BA;   /* Sapphire */
            --diamond: #B9F2FF;    /* Diamond */
            
            --primary: #0FBA7A;
            --accent: #FFB547;
            --purple: #9D7BFF;
            
            --glass-bg: rgba(15, 25, 35, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            
            --font-display: 'Clash Display', sans-serif;
            --font-body: 'Satoshi', sans-serif;
            --font-mono: 'Space Grotesk', monospace;
        }

        body {
            font-family: var(--font-body);
            background: #05080F;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            position: relative;
            overflow: hidden; /* NO SCROLLING */
        }

        /* ===== A4 SIZE CONTAINER (EXACT FIT) ===== */
        .a4-container {
            width: 100%;
            max-width: 900px; /* A4 width equivalent */
            height: 95vh; /* A4 height equivalent */
            max-height: 95vh;
            margin: 0 auto;
            position: relative;
            overflow-y: auto; /* ONLY IF NEEDED, BUT DESIGNED TO NOT SCROLL */
            overflow-x: hidden;
            padding: 0.75rem;
            scrollbar-width: none; /* Hide scrollbar */
        }
        
        .a4-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar */
        }

        /* ===== COSMIC BACKGROUND (FIXED) ===== */
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
        }
        
        .orb-1 { width: 400px; height: 400px; background: var(--primary); top: -100px; left: -100px; }
        .orb-2 { width: 350px; height: 350px; background: var(--purple); bottom: -100px; right: -100px; }
        .orb-3 { width: 300px; height: 300px; background: var(--accent); top: 30%; left: 70%; }
        
        .particle-grid {
            position: fixed;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* ===== ULTRA COMPACT GLASS CARD ===== */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 1.25rem 1.5rem;
            box-shadow: 0 20px 40px -12px rgba(0,0,0,0.5);
            position: relative;
            width: 100%;
        }

        /* ===== MICRO LOGO - COMPACT ===== */
        .logo-micro {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }
        
        .logo-icon-small {
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, var(--primary), #0A8C5E);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: white;
            box-shadow: 0 10px 20px rgba(15,186,122,0.3);
        }
        
        .logo-text-small {
            font-family: var(--font-display);
            font-size: 1.6rem;
            font-weight: 700;
            background: linear-gradient(135deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }
        
        .badge-premium {
            background: rgba(255,181,71,0.15);
            border: 1px solid rgba(255,181,71,0.3);
            padding: 0.25rem 0.75rem;
            border-radius: 30px;
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--accent);
            letter-spacing: 0.1em;
        }

        /* ===== 3-COLUMN PACKAGE GRID - ULTRA COMPACT ===== */
        .package-3col {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin: 0.75rem 0;
        }
        
        .package-3col-bottom {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .package-mini {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 0.6rem 0.3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .package-mini:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 8px 15px rgba(15,186,122,0.2);
            background: rgba(15,186,122,0.1);
        }
        
        .package-mini.selected {
            border: 2px solid white;
            background: linear-gradient(145deg, rgba(15,186,122,0.2), rgba(10,140,94,0.2));
            box-shadow: 0 0 0 2px var(--primary), 0 10px 20px rgba(15,186,122,0.3);
        }
        
        .package-mini.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 3px;
            right: 3px;
            background: var(--primary);
            color: white;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* PACKAGE NAMES & COLORS */
        .package-name {
            font-family: var(--font-display);
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 0.1rem;
        }
        
        .package-price {
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
        }
        
        .package-bonus-mini {
            font-size: 0.6rem;
            background: rgba(255,181,71,0.15);
            color: var(--accent);
            padding: 0.15rem 0.4rem;
            border-radius: 12px;
            margin-top: 0.1rem;
            white-space: nowrap;
        }

        /* PACKAGE TIER COLORS */
        .tier-reg { color: var(--reg); }
        .tier-bronze { color: var(--bronze); }
        .tier-silver { color: var(--silver); }
        .tier-gold { color: var(--gold); text-shadow: 0 0 5px rgba(255,215,0,0.3); }
        .tier-platinum { color: var(--platinum); }
        .tier-emerald { color: var(--emerald); }
        .tier-ruby { color: var(--ruby); }
        .tier-sapphire { color: var(--sapphire); }
        .tier-diamond { color: var(--diamond); text-shadow: 0 0 8px rgba(185,242,255,0.4); }

        /* ===== ULTRA COMPACT BONUS BANNER ===== */
        .bonus-strip {
            background: linear-gradient(145deg, rgba(15,186,122,0.15), rgba(255,181,71,0.15));
            border-radius: 20px;
            padding: 0.6rem 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(255,181,71,0.2);
        }
        
        .bonus-strip-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .bonus-strip-title i {
            color: var(--accent);
            font-size: 1.1rem;
        }
        
        .bonus-strip-amount {
            font-family: var(--font-display);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1rem;
        }

        /* ===== ULTRA COMPACT FORM ===== */
        .form-grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.6rem;
            margin-bottom: 0.6rem;
        }
        
        .form-group-compact {
            position: relative;
        }
        
        .form-group-compact i {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.4);
            font-size: 0.8rem;
        }
        
        .input-compact {
            width: 100%;
            padding: 0.7rem 0.7rem 0.7rem 2rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 14px;
            color: white;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .input-compact:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 0 2px rgba(15,186,122,0.2);
        }

        /* ===== SELECTED PACKAGE INFO - COMPACT ===== */
        .selected-info-compact {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 0.6rem 1rem;
            margin: 0.6rem 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .selected-tag-compact {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .package-tag {
            background: rgba(15,186,122,0.15);
            padding: 0.25rem 0.75rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .bonus-tag {
            background: rgba(255,181,71,0.15);
            padding: 0.25rem 0.75rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* ===== REFERRAL BADGE - COMPACT ===== */
        .referral-badge-compact {
            background: linear-gradient(145deg, rgba(157,123,255,0.15), rgba(255,107,157,0.15));
            border-radius: 16px;
            padding: 0.6rem 1rem;
            margin-bottom: 0.6rem;
            border: 1px solid rgba(157,123,255,0.2);
            display: none;
        }
        
        .referral-code-compact {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            font-weight: 700;
            background: rgba(255,255,255,0.1);
            padding: 0.4rem;
            border-radius: 10px;
            letter-spacing: 0.1em;
            color: var(--purple);
            text-align: center;
        }

        /* ===== BUTTON - COMPACT ===== */
        .btn-compact {
            width: 100%;
            padding: 0.8rem;
            border: none;
            border-radius: 20px;
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: linear-gradient(145deg, var(--primary), #0A8C5E);
            color: white;
            box-shadow: 0 10px 20px -8px rgba(15,186,122,0.4);
            transition: all 0.3s;
        }
        
        .btn-compact:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -8px rgba(15,186,122,0.6);
        }

        /* ===== TOGGLE - COMPACT ===== */
        .toggle-compact {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
        }
        
        .toggle-link-compact {
            color: var(--primary);
            font-weight: 700;
            cursor: pointer;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            background: rgba(15,186,122,0.1);
            margin-left: 0.5rem;
        }

        /* ===== HIDDEN ===== */
        .hidden { display: none !important; }

        /* ===== NO SCROLL - EVERYTHING FITS ===== */
        @media (max-width: 900px) {
            .a4-container { height: 98vh; padding: 0.25rem; }
            .glass-card { padding: 1rem; }
            .form-grid-2col { grid-template-columns: 1fr; }
            .package-3col, .package-3col-bottom { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
</head>
<body>
    <!-- COSMIC BACKGROUND -->
    <div class="cosmic-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
        <div class="particle-grid"></div>
    </div>

    <!-- A4 CONTAINER - NO SCROLL -->
    <div class="a4-container">
        <!-- MAIN GLASS CARD -->
        <div class="glass-card">
            <!-- LOGO SECTION - COMPACT -->
            <div class="logo-micro">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div class="logo-icon-small">
                        <i class="fas fa-crown"></i>
                    </div>
                    <span class="logo-text-small">BILUXE10</span>
                </div>
                <span class="badge-premium">PREMIUM</span>
            </div>

            <!-- HOW TO JOIN - ULTRA COMPACT -->
            <div id="signupGuide" style="background: rgba(15,186,122,0.08); border-radius: 16px; padding: 0.6rem; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                <div style="background: rgba(15,186,122,0.15); padding: 0.4rem; border-radius: 12px;">
                    <i class="fas fa-bolt" style="color: var(--primary); font-size: 0.9rem;"></i>
                </div>
                <div style="font-size: 0.7rem;">
                    <span style="font-weight: 700;">4 STEPS:</span> Register â†’ Select Package â†’ Pay â†’ Earn
                </div>
            </div>

            <!-- MEGA BONUS STRIP -->
            <div id="bonusBanner" class="bonus-strip">
                <div class="bonus-strip-title">
                    <i class="fas fa-gem"></i>
                    <span style="font-weight: 600; font-size: 0.75rem;">JOINING BONUS</span>
                </div>
                <div class="bonus-strip-amount">â‚¹500 - â‚¹8,000</div>
            </div>

            <!-- PACKAGE GRID - TOP ROW (5 CARDS: REG, BRONZE, SILVER, GOLD, PLATINUM) -->
            <div class="package-3col">
                <!-- Registration (â‚¹250) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="250" data-bonus="500" data-name="REGISTRATION">
                    <div class="package-name tier-reg">REGISTRATION</div>
                    <div class="package-price">â‚¹250</div>
                    <div class="package-bonus-mini">+â‚¹500</div>
                </div>
                
                <!-- Bronze (â‚¹499) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="499" data-bonus="999" data-name="BRONZE">
                    <div class="package-name tier-bronze">BRONZE</div>
                    <div class="package-price">â‚¹499</div>
                    <div class="package-bonus-mini">+â‚¹999</div>
                </div>
                
                <!-- Silver (â‚¹1299) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="1299" data-bonus="2499" data-name="SILVER">
                    <div class="package-name tier-silver">SILVER</div>
                    <div class="package-price">â‚¹1,299</div>
                    <div class="package-bonus-mini">+â‚¹2,499</div>
                </div>
                
                <!-- Gold (â‚¹2499) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="2499" data-bonus="3000" data-name="GOLD">
                    <div class="package-name tier-gold">GOLD</div>
                    <div class="package-price">â‚¹2,499</div>
                    <div class="package-bonus-mini">+â‚¹3,000</div>
                </div>
                
                <!-- Platinum (â‚¹3499) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="3499" data-bonus="4000" data-name="PLATINUM">
                    <div class="package-name tier-platinum">PLATINUM</div>
                    <div class="package-price">â‚¹3,499</div>
                    <div class="package-bonus-mini">+â‚¹4,000</div>
                </div>
            </div>

            <!-- PACKAGE GRID - BOTTOM ROW (4 CARDS: EMERALD, RUBY, SAPPHIRE, DIAMOND) -->
            <div class="package-3col-bottom">
                <!-- Emerald (â‚¹4999) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="4999" data-bonus="5000" data-name="EMERALD">
                    <div class="package-name tier-emerald">EMERALD</div>
                    <div class="package-price">â‚¹4,999</div>
                    <div class="package-bonus-mini">+â‚¹5,000</div>
                </div>
                
                <!-- Ruby (â‚¹9999) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="9999" data-bonus="5500" data-name="RUBY">
                    <div class="package-name tier-ruby">RUBY</div>
                    <div class="package-price">â‚¹9,999</div>
                    <div class="package-bonus-mini">+â‚¹5,500</div>
                </div>
                
                <!-- Sapphire (â‚¹15999) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="15999" data-bonus="7000" data-name="SAPPHIRE">
                    <div class="package-name tier-sapphire">SAPPHIRE</div>
                    <div class="package-price">â‚¹15,999</div>
                    <div class="package-bonus-mini">+â‚¹7,000</div>
                </div>
                
                <!-- Diamond (â‚¹23999) -->
                <div class="package-mini" onclick="selectPackage(this)" data-amount="23999" data-bonus="8000" data-name="DIAMOND">
                    <div class="package-name tier-diamond">DIAMOND</div>
                    <div class="package-price">â‚¹23,999</div>
                    <div class="package-bonus-mini">+â‚¹8,000</div>
                </div>
            </div>

            <!-- REFERRAL BADGE -->
            <div id="referralBadge" class="referral-badge-compact">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.3rem;">
                    <i class="fas fa-user-friends" style="color: var(--purple); font-size: 0.8rem;"></i>
                    <span style="font-weight: 600; font-size: 0.7rem;">REFERRAL CODE</span>
                </div>
                <div id="referralCodeDisplay" class="referral-code-compact">BLX10XXXXXX</div>
            </div>

            <!-- SIGNUP FORM -->
            <div id="signupFormContainer">
                <!-- 2-COLUMN FORM GRID - ULTRA COMPACT -->
                <div class="form-grid-2col">
                    <div class="form-group-compact">
                        <i class="fas fa-user"></i>
                        <input type="text" id="signupFullName" class="input-compact" placeholder="Full Name">
                    </div>
                    
                    <div class="form-group-compact">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="signupEmail" class="input-compact" placeholder="Email">
                    </div>
                    
                    <div class="form-group-compact">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="signupPassword" class="input-compact" placeholder="Password (6+ chars)">
                    </div>
                    
                    <div class="form-group-compact">
                        <i class="fas fa-phone"></i>
                        <input type="tel" id="signupPhone" class="input-compact" placeholder="Phone">
                    </div>
                    
                    <div class="form-group-compact" style="grid-column: span 2;">
                        <i class="fas fa-gift"></i>
                        <input type="text" id="signupReferralCode" class="input-compact" placeholder="Referral Code (Optional)" readonly>
                    </div>
                </div>

                <!-- SELECTED PACKAGE INFO - COMPACT -->
                <div id="selectedPackageInfo" class="selected-info-compact">
                    <div class="selected-tag-compact">
                        <span class="package-tag">
                            <i class="fas fa-box"></i>
                            <span id="displayPackageName">REGISTRATION</span>
                        </span>
                        <span class="bonus-tag">
                            <i class="fas fa-gift"></i>
                            <span id="displayBonusAmount">â‚¹500</span>
                        </span>
                    </div>
                    <span style="font-size: 0.65rem; color: rgba(255,255,255,0.5);">Bonus after payment</span>
                </div>

                <!-- SIGNUP BUTTON -->
                <button id="signupBtn" class="btn-compact">
                    <i class="fas fa-user-plus"></i> CREATE ACCOUNT
                </button>
            </div>

            <!-- LOGIN FORM (HIDDEN) -->
            <div id="loginFormContainer" class="hidden">
                <div style="margin-bottom: 0.75rem;">
                    <div class="form-group-compact" style="margin-bottom: 0.6rem;">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" class="input-compact" placeholder="Email Address">
                    </div>
                    
                    <div class="form-group-compact" style="margin-bottom: 0.6rem;">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" class="input-compact" placeholder="Password">
                    </div>
                </div>
                
                <button id="loginBtn" class="btn-compact">
                    <i class="fas fa-sign-in-alt"></i> LOGIN TO DASHBOARD
                </button>
            </div>

            <!-- FORM TOGGLE -->
            <div class="toggle-compact">
                <span id="toggleMessage">Already have an account?</span>
                <span id="toggleButton" class="toggle-link-compact">Login</span>
            </div>

            <!-- LOADING SPINNER -->
            <div id="loadingSpinner" style="display: none; text-align: center; padding: 0.5rem;">
                <div style="width: 30px; height: 30px; border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto;"></div>
                <p style="font-size: 0.7rem; margin-top: 0.25rem;">Processing...</p>
            </div>

            <!-- ALERT MESSAGE -->
            <div id="alertMessage" style="border-radius: 12px; padding: 0.6rem; margin-top: 0.6rem; display: none; font-size: 0.75rem;"></div>
        </div>
    </div>

    <style>
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>

    <script>
        // ============================================
        // ðŸ”¥ FIREBASE CONFIGURATION
        // ============================================
        const firebaseConfig = {
            apiKey: "AIzaSyDxxkC9iD1V1w-53Kf4oBrHEXlBLvCc7sE",
            authDomain: "biluxe10-3e894.firebaseapp.com",
            projectId: "biluxe10-3e894",
            storageBucket: "biluxe10-3e894.firebasestorage.app",
            messagingSenderId: "804749588233",
            appId: "1:804749588233:web:7777648c0c7834733c05d8"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ============================================
        // ðŸ”¥ PACKAGE DATA WITH NAMES
        // ============================================
        const PACKAGES = {
            250: { name: 'REGISTRATION', tier: 'reg', bonus: 500 },
            499: { name: 'BRONZE', tier: 'bronze', bonus: 999 },
            1299: { name: 'SILVER', tier: 'silver', bonus: 2499 },
            2499: { name: 'GOLD', tier: 'gold', bonus: 3000 },
            3499: { name: 'PLATINUM', tier: 'platinum', bonus: 4000 },
            4999: { name: 'EMERALD', tier: 'emerald', bonus: 5000 },
            9999: { name: 'RUBY', tier: 'ruby', bonus: 5500 },
            15999: { name: 'SAPPHIRE', tier: 'sapphire', bonus: 7000 },
            23999: { name: 'DIAMOND', tier: 'diamond', bonus: 8000 }
        };

        // ============================================
        // ðŸ”¥ GLOBAL VARIABLES
        // ============================================
        let isLoginMode = false;
        let selectedPackageAmount = 250;
        let selectedPackageBonus = 500;
        let selectedPackageName = 'REGISTRATION';
        
        const urlParams = new URLSearchParams(window.location.search);
        const referralCodeFromUrl = urlParams.get('ref');

        // ============================================
        // ðŸ”¥ HELPER: Get sanitized email ID
        // ============================================
        function getEmailId(email) {
            return email.toLowerCase().replace(/\./g, '_');
        }

        // ============================================
        // ðŸ”¥ PACKAGE SELECTION
        // ============================================
        window.selectPackage = function(element) {
            document.querySelectorAll('.package-mini').forEach(card => {
                card.classList.remove('selected');
            });
            
            element.classList.add('selected');
            
            selectedPackageAmount = parseInt(element.getAttribute('data-amount'));
            selectedPackageBonus = parseInt(element.getAttribute('data-bonus'));
            selectedPackageName = element.getAttribute('data-name');
            
            document.getElementById('displayPackageName').textContent = selectedPackageName;
            document.getElementById('displayBonusAmount').textContent = 'â‚¹' + selectedPackageBonus.toLocaleString();
        };

        // ============================================
        // ðŸ”¥ AUTO-SELECT FIRST PACKAGE (REGISTRATION)
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const firstPackage = document.querySelector('.package-mini');
            if (firstPackage) {
                window.selectPackage(firstPackage);
            }
            
            if (referralCodeFromUrl) {
                document.getElementById('referralBadge').style.display = 'block';
                document.getElementById('referralCodeDisplay').textContent = referralCodeFromUrl;
                document.getElementById('signupReferralCode').value = referralCodeFromUrl;
            }
        });

        // ============================================
        // ðŸ”¥ TOGGLE BETWEEN LOGIN AND SIGNUP
        // ============================================
        document.getElementById('toggleButton').addEventListener('click', function() {
            isLoginMode = !isLoginMode;
            
            const signupForm = document.getElementById('signupFormContainer');
            const loginForm = document.getElementById('loginFormContainer');
            const signupGuide = document.getElementById('signupGuide');
            const bonusBanner = document.getElementById('bonusBanner');
            const packageGrids = document.querySelectorAll('.package-3col, .package-3col-bottom');
            const toggleMsg = document.getElementById('toggleMessage');
            const toggleBtn = document.getElementById('toggleButton');
            
            if (isLoginMode) {
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
                signupGuide.style.display = 'none';
                bonusBanner.style.display = 'none';
                packageGrids.forEach(grid => grid.style.display = 'none');
                toggleMsg.textContent = "Don't have an account?";
                toggleBtn.textContent = "Sign Up";
            } else {
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
                signupGuide.style.display = 'flex';
                bonusBanner.style.display = 'flex';
                packageGrids.forEach(grid => grid.style.display = 'grid');
                toggleMsg.textContent = "Already have an account?";
                toggleBtn.textContent = "Login";
            }
        });

        // ============================================
        // ðŸ”¥ UI HELPERS
        // ============================================
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }
        
        function showAlert(message, type = 'success') {
            const alertEl = document.getElementById('alertMessage');
            alertEl.textContent = message;
            alertEl.style.background = type === 'success' ? 'rgba(15,186,122,0.2)' : 'rgba(255,77,77,0.2)';
            alertEl.style.border = type === 'success' ? '1px solid rgba(15,186,122,0.4)' : '1px solid rgba(255,77,77,0.4)';
            alertEl.style.color = type === 'success' ? '#0FBA7A' : '#FF4D4D';
            alertEl.style.display = 'block';
            
            setTimeout(() => {
                alertEl.style.display = 'none';
            }, 5000);
        }

        // ============================================
        // ðŸ”¥ GENERATE REFERRAL CODE
        // ============================================
        function generateReferralCode(emailId) {
            const prefix = 'BLX';
            const timestamp = Date.now().toString().slice(-6);
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            const emailHash = emailId.slice(0, 4).toUpperCase();
            return `${prefix}${emailHash}${timestamp}${random}`;
        }

        // ============================================
        // ðŸ”¥ FIND REFERRER
        // ============================================
        async function findReferrerByCode(referralCode) {
            try {
                const snapshot = await db.collection('user_collections')
                    .where('referralCode', '==', referralCode)
                    .limit(1)
                    .get();
                
                if (!snapshot.empty) {
                    return {
                        emailId: snapshot.docs[0].id,
                        data: snapshot.docs[0].data()
                    };
                }
                return null;
            } catch (error) {
                console.error('Error finding referrer:', error);
                return null;
            }
        }

        // ============================================
        // ðŸ”¥ SIGNUP HANDLER
        // ============================================
        document.getElementById('signupBtn').addEventListener('click', async function() {
            const fullName = document.getElementById('signupFullName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value.trim();
            const phone = document.getElementById('signupPhone').value.trim();
            const referralCode = document.getElementById('signupReferralCode').value.trim();
            
            if (!fullName || !email || !password || !phone) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('Password must be at least 6 characters', 'error');
                return;
            }
            
            showLoading();
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                const emailId = getEmailId(email);
                const username = email.split('@')[0];
                const userReferralCode = generateReferralCode(emailId);
                
                let referrerEmailId = null;
                let referrerBonus = 0;
                
                if (referralCode) {
                    const referrer = await findReferrerByCode(referralCode);
                    if (referrer) {
                        referrerEmailId = referrer.emailId;
                        referrerBonus = Math.round(selectedPackageBonus * 0.10);
                    }
                }
                
                const userData = {
                    userId: user.uid,
                    emailId: emailId,
                    email: email,
                    username: username,
                    fullName: fullName,
                    phoneNumber: phone,
                    
                    selectedPackage: selectedPackageName,
                    packageAmount: selectedPackageAmount,
                    joiningBonus: selectedPackageBonus,
                    paymentStatus: 'pending',
                    
                    referralCode: userReferralCode,
                    referredBy: referrerEmailId || '',
                    referralCount: 0,
                    teamCount: 0,
                    
                    balance: 0,
                    totalEarnings: 0,
                    dailyEarnings: 0,
                    weeklyEarnings: 0,
                    monthlyEarnings: 0,
                    referralEarnings: 0,
                    teamEarnings: 0,
                    bonusEarnings: 0,
                    
                    pendingWithdrawals: 0,
                    totalWithdrawn: 0,
                    
                    joinDate: firebase.firestore.FieldValue.serverTimestamp(),
                    lastLogin: firebase.firestore.FieldValue.serverTimestamp(),
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    
                    isActive: true,
                    accountStatus: 'active'
                };
                
                const batch = db.batch();
                const userRef = db.collection('user_collections').doc(emailId);
                batch.set(userRef, userData);
                
                await batch.commit();
                
                showAlert(`âœ… ${selectedPackageName} account created! Bonus: â‚¹${selectedPackageBonus}`, 'success');
                
                setTimeout(() => {
                    window.location.href = `products.html?email=${encodeURIComponent(email)}&package=${selectedPackageName}`;
                }, 2000);
                
            } catch (error) {
                console.error('Signup error:', error);
                
                if (error.code === 'auth/email-already-in-use') {
                    showAlert('Email already registered. Please login.', 'error');
                } else {
                    showAlert('Error creating account: ' + error.message, 'error');
                }
            } finally {
                hideLoading();
            }
        });

        // ============================================
        // ðŸ”¥ LOGIN HANDLER
        // ============================================
        document.getElementById('loginBtn').addEventListener('click', async function() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!email || !password) {
                showAlert('Please enter email and password', 'error');
                return;
            }
            
            showLoading();
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                showAlert('Login successful! Redirecting...', 'success');
                
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1500);
                
            } catch (error) {
                console.error('Login error:', error);
                showAlert('Invalid email or password', 'error');
                hideLoading();
            }
        });

        console.log('âœ… A4 PREMIUM AUTH - NO SCROLL - PACKAGE NAMES ACTIVATED');
    </script>
</body>
</html>
