<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biluxe10 | Signup & Payment</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif}
    body{
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(135deg,#2b2b2b,#3d3d3d,#222);
      background-size:400% 400%;
      animation:bgMove 10s ease infinite;
      color:#fff;
    }
    @keyframes bgMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .box{
      background:rgba(255,255,255,0.1);
      padding:30px;
      border-radius:16px;
      width:370px;
      text-align:center;
      box-shadow:0 0 20px rgba(0,0,0,0.4);
      backdrop-filter:blur(10px);
    }
    h2{margin-bottom:20px;color:#00ffd0}
    input{
      width:100%;padding:12px;margin:8px 0;
      border:none;border-radius:8px;outline:none;
    }
    button{
      width:100%;padding:12px;
      border:none;border-radius:8px;
      background:#00ffd0;color:#000;font-weight:600;
      cursor:pointer;transition:.3s;
    }
    button:hover{background:#00cfa4}
    #payment-section{
      display:none;margin-top:20px;text-align:center;
    }
    #payment-section img{width:200px;height:200px;border-radius:10px;margin:10px 0;}
    #payment-section h3{color:#00ffd0;margin:10px 0;}
    #paid-btn{background:#ffcc00;color:#000;}
    #paid-btn:hover{background:#ffaa00;}
  </style>
</head>
<body>
  <div class="box">
    <h2>Signup</h2>
    <form id="signup-form">
      <input type="text" id="name" placeholder="Full Name" required />
      <input type="email" id="email" placeholder="Email" required />
      <input type="password" id="password" placeholder="Password" required />
      <button type="submit" id="signup-btn">Signup</button>
    </form>

    <div id="payment-section">
      <h3>üì± Scan & Pay Using PhonePe</h3>
      <p>UPI ID: <b>9019254743@axl</b></p>
      <img src="https://i.postimg.cc/mg3hMHtV/phonepe-qr.png" alt="QR Code" />
      <p>After payment, click the button below üëá</p>
      <button id="paid-btn">üí∞ I Have Paid</button>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script>
    const SUPABASE_URL = "https://cisbvzecomyueslqkmbd.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpc2J2emVjb215dWVzbHFrbWJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MDMwNTIsImV4cCI6MjA3NTQ3OTA1Mn0.hUNwgoIt-hgh21a1WNqsGkC2QC6mpwAcio5ek86kAfc";
    const client = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const signupForm = document.getElementById("signup-form");
    const paymentSection = document.getElementById("payment-section");
    const paidBtn = document.getElementById("paid-btn");
    let currentUser = null;

    // üîπ Signup Process
    signupForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      const { data, error } = await client.auth.signUp({ email, password });
      if (error) return alert("‚ùå Signup failed: " + error.message);
      currentUser = data.user;
      alert("‚úÖ Signup successful! Now complete your payment below.");
      signupForm.style.display = "none";
      paymentSection.style.display = "block";
    });

    // üí∞ I Have Paid Button
    paidBtn.addEventListener("click", async () => {
      if (!currentUser) return alert("Please sign up first!");
      const { error } = await client.from("payments").insert([
        {
          user_id: currentUser.id,
          amount: 499,
          package_name: "Starter Plan",
          status: "pending",
          created_at: new Date().toISOString()
        }
      ]);
      if (error) return alert("‚ùå Payment record error: " + error.message);
      alert("‚úÖ Payment submitted! Admin will verify and approve soon.");
      paymentSection.style.display = "none";
    });
  </script>
</body>
</html>
